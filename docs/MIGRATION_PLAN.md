# funds-master è¿ç§»è‡³ funds æŠ€æœ¯æ–¹æ¡ˆ

> é¡¹ç›®åç§°ï¼š**åŸºé‡‘æ´¾**
> æ–‡æ¡£ç‰ˆæœ¬ï¼š1.0
> åˆ›å»ºæ—¥æœŸï¼š2026å¹´2æœˆ1æ—¥

## ä¸€ã€è¿ç§»æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

å°† **funds-master**ï¼ˆChrome æµè§ˆå™¨æ‰©å±•ï¼‰çš„å…¨éƒ¨åŠŸèƒ½è¿ç§»åˆ° **åŸºé‡‘æ´¾**ï¼ˆAstro + React Web åº”ç”¨ï¼‰ã€‚

**é¡¹ç›®åç§°ç¡®è®¤**ï¼šåŸºé‡‘æ´¾
**éƒ¨ç½²å¹³å°**ï¼šVercel
**PWA æ”¯æŒ**ï¼šä¸éœ€è¦
**æ•°æ®è¿ç§»**ï¼šä¸éœ€è¦ï¼ˆæ–°é¡¹ç›®ï¼Œæ— è€ç”¨æˆ·æ•°æ®è¿ç§»éœ€æ±‚ï¼‰

### 1.2 æŠ€æœ¯æ ˆå¯¹æ¯”

| é¡¹ç›® | funds-masterï¼ˆæºï¼‰ | fundsï¼ˆç›®æ ‡ï¼‰ |
|------|-------------------|---------------|
| æ¡†æ¶ | Vue 2 + Webpack | Astro 5 + React 19 |
| UI ç»„ä»¶ | Element UI | shadcn/ui |
| å›¾è¡¨ | ECharts 4 | ECharts 5 |
| æ ·å¼ | SCSS | Tailwind CSS |
| çŠ¶æ€ç®¡ç† | Vue data + chrome.storage | Zustand + localStorage |
| HTTP è¯·æ±‚ | Axios | Axios |
| å›¾æ ‡ | Element Icons | Lucide React |
| ç±»å‹ç³»ç»Ÿ | æ—  | TypeScript |

### 1.3 è¿ç§»èŒƒå›´

**é«˜ä¼˜å…ˆçº§åŠŸèƒ½ï¼ˆç¬¬ä¸€é˜¶æ®µ MVPï¼‰**ï¼š
- âœ… åŸºé‡‘ç®¡ç†åŠŸèƒ½ï¼ˆæ·»åŠ /åˆ é™¤/æ’åºï¼‰
- âœ… å®æ—¶æ•°æ®å±•ç¤ºï¼ˆä¼°å€¼/æ¶¨è·Œå¹…ï¼‰
- âœ… æ”¶ç›Šè®¡ç®—åŠŸèƒ½ï¼ˆæ—¥æ”¶ç›Š/æŒæœ‰æ”¶ç›Šï¼‰
- âœ… æŒ‡æ•°æ å±•ç¤º
- âœ… å›¾è¡¨å±•ç¤ºåŠŸèƒ½ï¼ˆä¼°å€¼èµ°åŠ¿/å†å²å‡€å€¼ï¼‰
- âœ… è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½ï¼ˆåŸºé‡‘è¯¦æƒ…/æŒä»“æ˜ç»†ï¼‰
- âœ… è¡Œæƒ…ä¸­å¿ƒåŠŸèƒ½ï¼ˆå¤§ç›˜/è¡Œä¸š/åŒ—å‘å—å‘ï¼‰
- âœ… è®¾ç½®åŠŸèƒ½ï¼ˆæ˜¾ç¤ºè®¾ç½®/ä¸»é¢˜åˆ‡æ¢ï¼‰
- âœ… **ç§»åŠ¨ç«¯å“åº”å¼é€‚é…**
- âœ… **æ˜æš—ä¸»é¢˜åˆ‡æ¢**

**ä½ä¼˜å…ˆçº§åŠŸèƒ½ï¼ˆç¬¬äºŒé˜¶æ®µï¼‰**ï¼š
- ğŸ”œ æ•°æ®å¯¼å…¥å¯¼å‡ºï¼ˆExcel/JSONï¼‰
- ğŸ”œ æ‹–æ‹½æ’åºä¼˜åŒ–
- ğŸ”œ æ›´å¤šå›¾è¡¨ç±»å‹

**ä¸è¿ç§»åŠŸèƒ½**ï¼š
- âŒ æµè§ˆå™¨è§’æ ‡æé†’ï¼ˆWeb ä¸æ”¯æŒï¼‰
- âŒ chrome.storage åŒæ­¥ï¼ˆæ”¹ç”¨ localStorageï¼‰
- âŒ PWA åŠŸèƒ½ï¼ˆæ˜ç¡®ä¸éœ€è¦ï¼‰
- âŒ æ•°æ®è¿ç§»åŠŸèƒ½ï¼ˆæ–°é¡¹ç›®ï¼‰

### 1.4 æ ¸å¿ƒç‰¹æ€§

- ğŸ“± **ç§»åŠ¨ç«¯ä¼˜å…ˆ**ï¼šå®Œå…¨å“åº”å¼è®¾è®¡ï¼Œé€‚é…æ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢ç«¯
- ğŸŒ“ **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒæ˜äº®/æš—é»‘ä¸¤ç§ä¸»é¢˜æ¨¡å¼
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šå¿«é€ŸåŠ è½½ï¼Œæµç•…äº¤äº’
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œæ— éœ€æ³¨å†Œ

---

## äºŒã€ç›®æ ‡é¡¹ç›®ç»“æ„

```
funds/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ holiday.json              # èŠ‚å‡æ—¥æ•°æ®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                   # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ select.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ switch.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ slider.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tabs.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ fund/                 # åŸºé‡‘ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FundList.tsx      # åŸºé‡‘åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ FundItem.tsx      # åŸºé‡‘åˆ—è¡¨é¡¹
â”‚   â”‚   â”‚   â”œâ”€â”€ FundSearch.tsx    # åŸºé‡‘æœç´¢
â”‚   â”‚   â”‚   â”œâ”€â”€ FundDetail.tsx    # åŸºé‡‘è¯¦æƒ…å¼¹çª—
â”‚   â”‚   â”‚   â”œâ”€â”€ FundInfo.tsx      # åŸºé‡‘æ¦‚å†µ
â”‚   â”‚   â”‚   â”œâ”€â”€ PositionDetail.tsx # æŒä»“æ˜ç»†
â”‚   â”‚   â”‚   â””â”€â”€ ManagerDetail.tsx  # åŸºé‡‘ç»ç†
â”‚   â”‚   â”œâ”€â”€ index/                # æŒ‡æ•°ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ IndexBar.tsx      # æŒ‡æ•°æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ IndexItem.tsx     # æŒ‡æ•°é¡¹
â”‚   â”‚   â”‚   â””â”€â”€ IndexDetail.tsx   # æŒ‡æ•°è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ chart/                # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ EstimateChart.tsx  # ä¼°å€¼èµ°åŠ¿å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryChart.tsx   # å†å²å‡€å€¼å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfitChart.tsx    # æ”¶ç›Šèµ°åŠ¿å›¾
â”‚   â”‚   â”‚   â””â”€â”€ ChartTheme.ts      # å›¾è¡¨ä¸»é¢˜
â”‚   â”‚   â”œâ”€â”€ market/               # è¡Œæƒ…ä¸­å¿ƒç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Market.tsx        # è¡Œæƒ…ä¸­å¿ƒå…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ MarketFlow.tsx    # å¤§ç›˜èµ„é‡‘
â”‚   â”‚   â”‚   â”œâ”€â”€ IndustryFlow.tsx  # è¡Œä¸šæ¿å—
â”‚   â”‚   â”‚   â”œâ”€â”€ NorthFlow.tsx     # åŒ—å‘èµ„é‡‘
â”‚   â”‚   â”‚   â””â”€â”€ SouthFlow.tsx     # å—å‘èµ„é‡‘
â”‚   â”‚   â”œâ”€â”€ settings/             # è®¾ç½®ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.tsx      # è®¾ç½®é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DisplaySettings.tsx # æ˜¾ç¤ºè®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ImportExport.tsx  # å¯¼å…¥å¯¼å‡º
â”‚   â”‚   â””â”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ Header.tsx        # é¡¶éƒ¨å¯¼èˆª
â”‚   â”‚       â”œâ”€â”€ Footer.tsx        # åº•éƒ¨
â”‚   â”‚       â””â”€â”€ ThemeToggle.tsx   # ä¸»é¢˜åˆ‡æ¢
â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useFundData.ts        # åŸºé‡‘æ•°æ®
â”‚   â”‚   â”œâ”€â”€ useIndexData.ts       # æŒ‡æ•°æ•°æ®
â”‚   â”‚   â”œâ”€â”€ useMarketStatus.ts    # å¸‚åœºçŠ¶æ€
â”‚   â”‚   â””â”€â”€ useLocalStorage.ts    # æœ¬åœ°å­˜å‚¨
â”‚   â”œâ”€â”€ stores/                   # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ fundStore.ts          # åŸºé‡‘çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ settingsStore.ts      # è®¾ç½®çŠ¶æ€
â”‚   â”‚   â””â”€â”€ marketStore.ts        # è¡Œæƒ…çŠ¶æ€
â”‚   â”œâ”€â”€ services/                 # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api.ts                # Axios é…ç½®
â”‚   â”‚   â”œâ”€â”€ fundApi.ts            # åŸºé‡‘ API
â”‚   â”‚   â”œâ”€â”€ indexApi.ts           # æŒ‡æ•° API
â”‚   â”‚   â”œâ”€â”€ marketApi.ts          # è¡Œæƒ… API
â”‚   â”‚   â””â”€â”€ searchApi.ts          # æœç´¢ API
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ calculate.ts          # æ”¶ç›Šè®¡ç®—
â”‚   â”‚   â”œâ”€â”€ format.ts             # æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ holiday.ts            # èŠ‚å‡æ—¥åˆ¤æ–­
â”‚   â”‚   â””â”€â”€ time.ts               # æ—¶é—´å¤„ç†
â”‚   â”œâ”€â”€ types/                    # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ fund.ts               # åŸºé‡‘ç±»å‹
â”‚   â”‚   â”œâ”€â”€ index.ts              # æŒ‡æ•°ç±»å‹
â”‚   â”‚   â””â”€â”€ settings.ts           # è®¾ç½®ç±»å‹
â”‚   â”œâ”€â”€ styles/                   # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ globals.css           # Tailwind å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ Layout.astro          # Astro å¸ƒå±€
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ index.astro           # é¦–é¡µ
â”‚       â”œâ”€â”€ market.astro          # è¡Œæƒ…ä¸­å¿ƒé¡µ
â”‚       â””â”€â”€ settings.astro        # è®¾ç½®é¡µ
â”œâ”€â”€ astro.config.mjs
â”œâ”€â”€ tailwind.config.mjs
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ components.json               # shadcn/ui é…ç½®
â””â”€â”€ package.json
```

---

## ä¸‰ã€ä¾èµ–å®‰è£…

### 3.1 åŸºç¡€ä¾èµ–

```bash
# React æ”¯æŒ
pnpm add @astrojs/react react react-dom

# Tailwind CSS
pnpm add -D tailwindcss @astrojs/tailwind autoprefixer

# TypeScript
pnpm add -D typescript @types/react @types/react-dom
```

### 3.2 UI å’Œæ ·å¼ä¾èµ–

```bash
# shadcn/ui åŸºç¡€ä¾èµ–
pnpm add class-variance-authority clsx tailwind-merge
pnpm add @radix-ui/react-dialog @radix-ui/react-select
pnpm add @radix-ui/react-switch @radix-ui/react-slider
pnpm add @radix-ui/react-tabs @radix-ui/react-popover
pnpm add @radix-ui/react-dropdown-menu

# å›¾æ ‡
pnpm add lucide-react
```

### 3.3 åŠŸèƒ½ä¾èµ–

```bash
# çŠ¶æ€ç®¡ç†
pnpm add zustand

# HTTP è¯·æ±‚
pnpm add axios

# å›¾è¡¨
pnpm add echarts echarts-for-react

# å¯¼å‡ºåŠŸèƒ½
pnpm add xlsx file-saver
pnpm add -D @types/file-saver

# æ‹–æ‹½æ’åº
pnpm add @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities
```

### 3.4 å®Œæ•´ package.json

```json
{
  "name": "funds",
  "type": "module",
  "version": "1.0.0",
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview"
  },
  "dependencies": {
    "@astrojs/react": "^4.2.0",
    "@astrojs/tailwind": "^6.0.0",
    "@dnd-kit/core": "^6.1.0",
    "@dnd-kit/sortable": "^8.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@radix-ui/react-dialog": "^1.1.4",
    "@radix-ui/react-dropdown-menu": "^2.1.4",
    "@radix-ui/react-popover": "^1.1.4",
    "@radix-ui/react-select": "^2.1.4",
    "@radix-ui/react-slider": "^1.2.2",
    "@radix-ui/react-switch": "^1.1.2",
    "@radix-ui/react-tabs": "^1.1.2",
    "astro": "^5.17.1",
    "axios": "^1.7.9",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "echarts": "^5.5.1",
    "echarts-for-react": "^3.0.2",
    "file-saver": "^2.0.5",
    "lucide-react": "^0.469.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "tailwind-merge": "^2.6.0",
    "xlsx": "^0.18.5",
    "zustand": "^5.0.3"
  },
  "devDependencies": {
    "@types/file-saver": "^2.0.7",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "autoprefixer": "^10.4.20",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.7.2"
  }
}
```

---

## å››ã€é…ç½®æ–‡ä»¶

### 4.1 astro.config.mjs

```javascript
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';

export default defineConfig({
  integrations: [
    react(),
    tailwind({
      applyBaseStyles: false,
    }),
  ],
  output: 'static',
});
```

### 4.2 tailwind.config.mjs

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: ['class'], // æ”¯æŒ class æ¨¡å¼çš„æš—é»‘ä¸»é¢˜åˆ‡æ¢
  content: ['./src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}'],
  theme: {
    extend: {
      // å“åº”å¼æ–­ç‚¹
      screens: {
        'xs': '375px',
        'sm': '640px',
        'md': '768px',
        'lg': '1024px',
        'xl': '1280px',
        '2xl': '1536px',
      },
      colors: {
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
        destructive: {
          DEFAULT: 'hsl(var(--destructive))',
          foreground: 'hsl(var(--destructive-foreground))',
        },
        muted: {
          DEFAULT: 'hsl(var(--muted))',
          foreground: 'hsl(var(--muted-foreground))',
        },
        accent: {
          DEFAULT: 'hsl(var(--accent))',
          foreground: 'hsl(var(--accent-foreground))',
        },
        // è‡ªå®šä¹‰æ¶¨è·Œé¢œè‰²
        up: {
          DEFAULT: '#ef4444',
          light: '#fecaca',
        },
        down: {
          DEFAULT: '#22c55e',
          light: '#bbf7d0',
        },
      },
      borderRadius: {
        lg: 'var(--radius)',
        md: 'calc(var(--radius) - 2px)',
        sm: 'calc(var(--radius) - 4px)',
      },
    },
  },
  plugins: [require('tailwindcss-animate')],
};
```

### 4.3 tsconfig.json

```json
{
  "extends": "astro/tsconfigs/strict",
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "react",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/hooks/*": ["./src/hooks/*"],
      "@/stores/*": ["./src/stores/*"],
      "@/services/*": ["./src/services/*"],
      "@/utils/*": ["./src/utils/*"],
      "@/types/*": ["./src/types/*"]
    }
  }
}
```

---

## äº”ã€ç±»å‹å®šä¹‰

### 5.1 åŸºé‡‘ç±»å‹ (src/types/fund.ts)

```typescript
// åŸºé‡‘åˆ—è¡¨é¡¹ï¼ˆå­˜å‚¨ï¼‰
export interface FundItem {
  code: string;       // åŸºé‡‘ä»£ç 
  num: number;        // æŒæœ‰ä»½é¢
  cost?: number;      // æˆæœ¬ä»·
}

// åŸºé‡‘æ•°æ®ï¼ˆAPI è¿”å› + è®¡ç®—ï¼‰
export interface FundData {
  fundcode: string;   // åŸºé‡‘ä»£ç 
  name: string;       // åŸºé‡‘åç§°
  jzrq: string;       // å‡€å€¼æ—¥æœŸ
  dwjz: number | null; // å•ä½å‡€å€¼
  gsz: number | null;  // ä¼°ç®—å‡€å€¼
  gszzl: number;      // ä¼°ç®—æ¶¨è·Œå¹…
  gztime: string;     // ä¼°å€¼æ—¶é—´
  hasReplace: boolean; // æ˜¯å¦å·²æ›´æ–°å®é™…å‡€å€¼
  num: number;        // æŒæœ‰ä»½é¢
  cost?: number;      // æˆæœ¬ä»·
  amount: number;     // æŒæœ‰é‡‘é¢
  gains: number;      // å½“æ—¥æ”¶ç›Š
  costGains: number;  // æŒæœ‰æ”¶ç›Š
  costGainsRate: number; // æŒæœ‰æ”¶ç›Šç‡
}

// API è¿”å›åŸå§‹æ•°æ®
export interface FundApiResponse {
  FCODE: string;
  SHORTNAME: string;
  PDATE: string;
  NAV: string;
  GSZ: string;
  GSZZL: string;
  GZTIME: string;
  NAVCHGRT: string;
}

// åŸºé‡‘è¯¦æƒ…ä¿¡æ¯
export interface FundInfo {
  FCODE: string;
  SHORTNAME: string;
  FTYPE: string;      // åŸºé‡‘ç±»å‹
  JJGS: string;       // åŸºé‡‘å…¬å¸
  JJJL: string;       // åŸºé‡‘ç»ç†
  DWJZ: string;       // å•ä½å‡€å€¼
  LJJZ: string;       // ç´¯è®¡å‡€å€¼
  FSRQ: string;       // å‡€å€¼æ—¥æœŸ
  ENDNAV: string;     // åŸºé‡‘è§„æ¨¡
  SGZT: string;       // ç”³è´­çŠ¶æ€
  SHZT: string;       // èµå›çŠ¶æ€
  SYL_Y: string;      // è¿‘1æœˆæ”¶ç›Šç‡
  SYL_3Y: string;     // è¿‘3æœˆæ”¶ç›Šç‡
  SYL_6Y: string;     // è¿‘6æœˆæ”¶ç›Šç‡
  SYL_1N: string;     // è¿‘1å¹´æ”¶ç›Šç‡
  RANKM: string;      // è¿‘1æœˆæ’å
  RANKQ: string;      // è¿‘3æœˆæ’å
  RANKHY: string;     // è¿‘6æœˆæ’å
  RANKY: string;      // è¿‘1å¹´æ’å
}

// æŒä»“è‚¡ç¥¨
export interface StockPosition {
  GPDM: string;       // è‚¡ç¥¨ä»£ç 
  GPJC: string;       // è‚¡ç¥¨ç®€ç§°
  JZBL: string;       // æŒä»“å æ¯”
  PCTNVCHG: string;   // è¾ƒä¸ŠæœŸå˜åŒ–
  PCTNVCHGTYPE: string; // å˜åŒ–ç±»å‹
  NEWTEXCH: string;   // äº¤æ˜“æ‰€
}

// æœç´¢ç»“æœ
export interface SearchResult {
  CODE: string;
  NAME: string;
}
```

### 5.2 æŒ‡æ•°ç±»å‹ (src/types/index.ts)

```typescript
// æŒ‡æ•°æ•°æ®
export interface IndexData {
  f2: number;         // æœ€æ–°ä»·
  f3: number;         // æ¶¨è·Œå¹…
  f4: number;         // æ¶¨è·Œé¢
  f12: string;        // ä»£ç 
  f13: number;        // å¸‚åœº(1=æ²ª,0=æ·±)
  f14: string;        // åç§°
}

// æŒ‡æ•°é…ç½®
export interface IndexConfig {
  value: string;      // å¦‚ "1.000001"
  label: string;      // å¦‚ "ä¸Šè¯æŒ‡æ•°"
}

// é¢„å®šä¹‰æŒ‡æ•°åˆ—è¡¨
export const INDEX_OPTIONS: IndexConfig[] = [
  { value: '1.000001', label: 'ä¸Šè¯æŒ‡æ•°' },
  { value: '1.000300', label: 'æ²ªæ·±300' },
  { value: '0.399001', label: 'æ·±è¯æˆæŒ‡' },
  { value: '1.000688', label: 'ç§‘åˆ›50' },
  { value: '0.399006', label: 'åˆ›ä¸šæ¿æŒ‡' },
  { value: '0.399005', label: 'ä¸­å°æ¿æŒ‡' },
  { value: '100.HSI', label: 'æ’ç”ŸæŒ‡æ•°' },
  { value: '100.DJIA', label: 'é“ç¼æ–¯' },
  { value: '100.NDX', label: 'çº³æ–¯è¾¾å…‹' },
  { value: '100.SPX', label: 'æ ‡æ™®500' },
];
```

### 5.3 è®¾ç½®ç±»å‹ (src/types/settings.ts)

```typescript
export interface Settings {
  // æ˜¾ç¤ºè®¾ç½®
  showGSZ: boolean;        // æ˜¾ç¤ºä¼°ç®—å‡€å€¼
  showAmount: boolean;     // æ˜¾ç¤ºæŒæœ‰é‡‘é¢
  showGains: boolean;      // æ˜¾ç¤ºä¼°å€¼æ”¶ç›Š
  showCost: boolean;       // æ˜¾ç¤ºæŒæœ‰æ”¶ç›Š
  showCostRate: boolean;   // æ˜¾ç¤ºæŒæœ‰æ”¶ç›Šç‡

  // ä¸»é¢˜è®¾ç½®
  darkMode: boolean;       // æš—è‰²æ¨¡å¼

  // æ’åºè®¾ç½®
  sortType: {
    field: SortField | null;
    order: 'asc' | 'desc' | null;
  };

  // å®æ—¶æ›´æ–°
  isLiveUpdate: boolean;
}

export type SortField = 'gszzl' | 'gains' | 'amount' | 'costGains' | 'costGainsRate';
```

---

## å…­ã€çŠ¶æ€ç®¡ç† (Zustand)

### 6.1 åŸºé‡‘çŠ¶æ€ (src/stores/fundStore.ts)

```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import type { FundItem, FundData } from '@/types/fund';

interface FundState {
  // æŒä¹…åŒ–æ•°æ®
  fundList: FundItem[];           // åŸºé‡‘åˆ—è¡¨ï¼ˆä»£ç +ä»½é¢+æˆæœ¬ï¼‰
  indexList: string[];            // æŒ‡æ•°åˆ—è¡¨

  // è¿è¡Œæ—¶æ•°æ®
  fundData: FundData[];           // åŸºé‡‘å®æ—¶æ•°æ®
  isLoading: boolean;

  // Actions
  addFund: (code: string) => void;
  addFunds: (codes: string[]) => void;
  removeFund: (code: string) => void;
  updateFundNum: (code: string, num: number) => void;
  updateFundCost: (code: string, cost: number) => void;
  reorderFunds: (fromIndex: number, toIndex: number) => void;
  setFundData: (data: FundData[]) => void;
  setLoading: (loading: boolean) => void;

  // æŒ‡æ•°æ“ä½œ
  addIndex: (code: string) => void;
  removeIndex: (code: string) => void;
  reorderIndex: (fromIndex: number, toIndex: number) => void;

  // å¯¼å…¥å¯¼å‡º
  importFunds: (funds: FundItem[]) => void;
  exportFunds: () => FundItem[];
}

export const useFundStore = create<FundState>()(
  persist(
    (set, get) => ({
      fundList: [],
      indexList: ['1.000001', '1.000300', '0.399001', '0.399006'],
      fundData: [],
      isLoading: false,

      addFund: (code) => {
        const { fundList } = get();
        if (!fundList.find(f => f.code === code)) {
          set({ fundList: [...fundList, { code, num: 0 }] });
        }
      },

      addFunds: (codes) => {
        const { fundList } = get();
        const newFunds = codes
          .filter(code => !fundList.find(f => f.code === code))
          .map(code => ({ code, num: 0 }));
        set({ fundList: [...fundList, ...newFunds] });
      },

      removeFund: (code) => {
        set(state => ({
          fundList: state.fundList.filter(f => f.code !== code),
          fundData: state.fundData.filter(f => f.fundcode !== code),
        }));
      },

      updateFundNum: (code, num) => {
        set(state => ({
          fundList: state.fundList.map(f =>
            f.code === code ? { ...f, num } : f
          ),
        }));
      },

      updateFundCost: (code, cost) => {
        set(state => ({
          fundList: state.fundList.map(f =>
            f.code === code ? { ...f, cost } : f
          ),
        }));
      },

      reorderFunds: (fromIndex, toIndex) => {
        set(state => {
          const newList = [...state.fundList];
          const [removed] = newList.splice(fromIndex, 1);
          newList.splice(toIndex, 0, removed);
          return { fundList: newList };
        });
      },

      setFundData: (data) => set({ fundData: data }),
      setLoading: (loading) => set({ isLoading: loading }),

      addIndex: (code) => {
        const { indexList } = get();
        if (!indexList.includes(code) && indexList.length < 4) {
          set({ indexList: [...indexList, code] });
        }
      },

      removeIndex: (code) => {
        set(state => ({
          indexList: state.indexList.filter(c => c !== code),
        }));
      },

      reorderIndex: (fromIndex, toIndex) => {
        set(state => {
          const newList = [...state.indexList];
          const [removed] = newList.splice(fromIndex, 1);
          newList.splice(toIndex, 0, removed);
          return { indexList: newList };
        });
      },

      importFunds: (funds) => set({ fundList: funds }),
      exportFunds: () => get().fundList,
    }),
    {
      name: 'fund-storage',
      partialize: (state) => ({
        fundList: state.fundList,
        indexList: state.indexList,
      }),
    }
  )
);
```

### 6.2 è®¾ç½®çŠ¶æ€ (src/stores/settingsStore.ts)

```typescript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import type { Settings, SortField } from '@/types/settings';

interface SettingsState extends Settings {
  setDarkMode: (dark: boolean) => void;
  toggleSetting: (key: keyof Omit<Settings, 'sortType'>) => void;
  setSortType: (field: SortField | null, order: 'asc' | 'desc' | null) => void;
  setLiveUpdate: (live: boolean) => void;
}

export const useSettingsStore = create<SettingsState>()(
  persist(
    (set) => ({
      showGSZ: false,
      showAmount: false,
      showGains: true,
      showCost: false,
      showCostRate: false,
      darkMode: false,
      sortType: { field: null, order: null },
      isLiveUpdate: true,

      setDarkMode: (dark) => set({ darkMode: dark }),

      toggleSetting: (key) => set(state => ({ [key]: !state[key] })),

      setSortType: (field, order) => set({ sortType: { field, order } }),

      setLiveUpdate: (live) => set({ isLiveUpdate: live }),
    }),
    {
      name: 'settings-storage',
    }
  )
);
```

---
## ä¸ƒã€API æœåŠ¡å±‚

### 7.1 Axios é…ç½® (src/services/api.ts)

```typescript
import axios from 'axios';

// åˆ›å»º axios å®ä¾‹
const api = axios.create({
  timeout: 10000,
});

// è¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use(
  (config) => {
    // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
    config.params = {
      ...config.params,
      _: Date.now(),
    };
    return config;
  },
  (error) => Promise.reject(error)
);

// å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  (response) => response.data,
  (error) => {
    console.error('API Error:', error);
    return Promise.reject(error);
  }
);

export default api;
```

### 7.2 åŸºé‡‘ API (src/services/fundApi.ts)

```typescript
import api from './api';
import type { FundApiResponse, FundInfo, StockPosition, SearchResult } from '@/types/fund';

const BASE_URL = 'https://fundmobapi.eastmoney.com';

// ç”Ÿæˆè®¾å¤‡ ID
const getDeviceId = (): string => {
  let deviceId = localStorage.getItem('deviceId');
  if (!deviceId) {
    deviceId = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
      const r = (Math.random() * 16) | 0;
      const v = c === 'x' ? r : (r & 0x3) | 0x8;
      return v.toString(16);
    });
    localStorage.setItem('deviceId', deviceId);
  }
  return deviceId;
};

// è·å–åŸºé‡‘å®æ—¶æ•°æ®
export const fetchFundData = async (codes: string[]): Promise<FundApiResponse[]> => {
  if (codes.length === 0) return [];

  const url = `${BASE_URL}/FundMNewApi/FundMNFInfo`;
  const response = await api.get(url, {
    params: {
      pageIndex: 1,
      pageSize: 200,
      plat: 'Android',
      appType: 'ttjj',
      product: 'EFund',
      Version: 1,
      deviceid: getDeviceId(),
      Fcodes: codes.join(','),
    },
  });
  return response.Datas || [];
};

// è·å–åŸºé‡‘è¯¦æƒ…
export const fetchFundInfo = async (code: string): Promise<FundInfo> => {
  const url = `${BASE_URL}/FundMApi/FundBaseTypeInformation.ashx`;
  const response = await api.get(url, {
    params: {
      FCODE: code,
      deviceid: 'Wap',
      plat: 'Wap',
      product: 'EFund',
      version: '2.0.0',
    },
  });
  return response.Datas;
};

// è·å–åŸºé‡‘æŒä»“
export const fetchFundPosition = async (code: string): Promise<{
  stocks: StockPosition[];
  date: string;
}> => {
  const url = `${BASE_URL}/FundMNewApi/FundMNInverstPosition`;
  const response = await api.get(url, {
    params: {
      FCODE: code,
      deviceid: 'Wap',
      plat: 'Wap',
      product: 'EFund',
      version: '2.0.0',
    },
  });
  return {
    stocks: response.Datas?.fundStocks || [],
    date: response.Expansion || '',
  };
};

// æœç´¢åŸºé‡‘
export const searchFund = async (keyword: string): Promise<SearchResult[]> => {
  const url = 'https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx';
  const response = await api.get(url, {
    params: {
      m: 9,
      key: keyword,
    },
  });
  return response.Datas || [];
};

// è·å–åŸºé‡‘ä¼°å€¼èµ°åŠ¿ï¼ˆå½“æ—¥åˆ†æ—¶ï¼‰
export const fetchFundEstimateTrend = async (code: string): Promise<{
  time: string[];
  values: number[];
}> => {
  const url = `${BASE_URL}/FundMNewApi/FundMNGZTrend`;
  const response = await api.get(url, {
    params: {
      FCODE: code,
      deviceid: 'Wap',
      plat: 'Wap',
      product: 'EFund',
      version: '2.0.0',
    },
  });

  const data = response.Datas || [];
  return {
    time: data.map((item: any) => item.x),
    values: data.map((item: any) => parseFloat(item.y)),
  };
};
```

### 7.3 æŒ‡æ•° API (src/services/indexApi.ts)

```typescript
import api from './api';
import type { IndexData } from '@/types/index';

const BASE_URL = 'https://push2.eastmoney.com';

// è·å–æŒ‡æ•°å®æ—¶æ•°æ®
export const fetchIndexData = async (codes: string[]): Promise<IndexData[]> => {
  if (codes.length === 0) return [];

  const url = `${BASE_URL}/api/qt/ulist.np/get`;
  const response = await api.get(url, {
    params: {
      fltt: 2,
      fields: 'f2,f3,f4,f12,f13,f14',
      secids: codes.join(','),
    },
  });
  return response.data?.diff || [];
};

// è·å–è‚¡ç¥¨å®æ—¶æ•°æ®
export const fetchStockData = async (codes: string[]): Promise<IndexData[]> => {
  return fetchIndexData(codes);
};

// è·å–æŒ‡æ•°/è‚¡ç¥¨èµ°åŠ¿å›¾æ•°æ®
export const fetchTrendData = async (code: string): Promise<{
  time: string[];
  values: number[];
  changes: number[];
}> => {
  const url = `${BASE_URL}/api/qt/stock/trends2/get`;
  const response = await api.get(url, {
    params: {
      fields1: 'f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13',
      fields2: 'f51,f52,f53,f54,f55,f56,f57,f58',
      secid: code,
      ndays: 1,
      iscr: 0,
    },
  });

  const trends = response.data?.trends || [];
  const time: string[] = [];
  const values: number[] = [];
  const changes: number[] = [];

  trends.forEach((item: string) => {
    const parts = item.split(',');
    time.push(parts[0].split(' ')[1]);
    values.push(parseFloat(parts[2]));
    changes.push(parseFloat(parts[8]));
  });

  return { time, values, changes };
};
```

### 7.4 è¡Œæƒ… API (src/services/marketApi.ts)

```typescript
import api from './api';

const BASE_URL = 'https://push2.eastmoney.com';

// è·å–ä¸¤å¸‚æˆäº¤ä¿¡æ¯
export const fetchMarketTurnover = async () => {
  const url = `${BASE_URL}/api/qt/ulist.np/get`;
  const response = await api.get(url, {
    params: {
      fltt: 2,
      fields: 'f6,f104,f105,f106',
      secids: '1.000001,0.399001', // ä¸Šè¯ã€æ·±è¯
    },
  });
  return response.data?.diff || [];
};

// è·å–å¤§ç›˜èµ„é‡‘æµå‘
export const fetchMarketFlow = async () => {
  const url = `${BASE_URL}/api/qt/ulist.np/get`;
  const response = await api.get(url, {
    params: {
      fltt: 2,
      fields: 'f62,f184,f66,f69,f72,f75,f78,f81,f84,f87',
      secids: '1.000001,0.399001',
    },
  });
  return response.data?.diff || [];
};

// è·å–è¡Œä¸šæ¿å—èµ„é‡‘æµå‘
export const fetchIndustryFlow = async () => {
  const url = `${BASE_URL}/api/qt/clist/get`;
  const response = await api.get(url, {
    params: {
      pn: 1,
      pz: 50,
      po: 1,
      np: 1,
      fltt: 2,
      invt: 2,
      fid: 'f62',
      fs: 'm:90+t:2',
      fields: 'f12,f14,f3,f62,f184,f66,f69,f72,f75,f78,f81,f84,f87',
    },
  });
  return response.data?.diff || [];
};

// è·å–åŒ—å‘èµ„é‡‘
export const fetchNorthFlow = async () => {
  const url = 'https://push2.eastmoney.com/api/qt/kamt.rtmin/get';
  const response = await api.get(url, {
    params: {
      fields1: 'f1,f2,f3,f4',
      fields2: 'f51,f52,f54,f56',
    },
  });
  return response.data || {};
};

// è·å–å—å‘èµ„é‡‘
export const fetchSouthFlow = async () => {
  const url = 'https://push2.eastmoney.com/api/qt/kamtbs.rtmin/get';
  const response = await api.get(url, {
    params: {
      fields1: 'f1,f2,f3,f4',
      fields2: 'f51,f52,f54,f56',
    },
  });
  return response.data || {};
};
```

---

## å…«ã€å·¥å…·å‡½æ•°

### 8.1 æ”¶ç›Šè®¡ç®— (src/utils/calculate.ts)

```typescript
import type { FundData, FundItem, FundApiResponse } from '@/types/fund';

// è®¡ç®—æŒæœ‰é‡‘é¢
export const calculateAmount = (dwjz: number | null, num: number): number => {
  if (!dwjz || !num) return 0;
  return Number((dwjz * num).toFixed(2));
};

// è®¡ç®—å½“æ—¥æ”¶ç›Š
export const calculateGains = (
  dwjz: number | null,
  gsz: number | null,
  gszzl: number,
  num: number,
  hasReplace: boolean
): number => {
  if (!num) return 0;

  if (hasReplace && dwjz) {
    // å·²æ›´æ–°å®é™…å‡€å€¼ï¼Œä½¿ç”¨æ¶¨è·Œå¹…è®¡ç®—
    return Number(((dwjz - dwjz / (1 + gszzl * 0.01)) * num).toFixed(2));
  } else if (gsz && dwjz) {
    // ä½¿ç”¨ä¼°ç®—å‡€å€¼è®¡ç®—
    return Number(((gsz - dwjz) * num).toFixed(2));
  }

  return 0;
};

// è®¡ç®—æŒæœ‰æ”¶ç›Š
export const calculateCostGains = (
  dwjz: number | null,
  cost: number | undefined,
  num: number
): number => {
  if (!dwjz || !cost || !num) return 0;
  return Number(((dwjz - cost) * num).toFixed(2));
};

// è®¡ç®—æŒæœ‰æ”¶ç›Šç‡
export const calculateCostGainsRate = (
  dwjz: number | null,
  cost: number | undefined
): number => {
  if (!dwjz || !cost || cost === 0) return 0;
  return Number((((dwjz - cost) / cost) * 100).toFixed(2));
};

// å¤„ç† API æ•°æ®è½¬æ¢ä¸ºå±•ç¤ºæ•°æ®
export const transformFundData = (
  apiData: FundApiResponse[],
  fundList: FundItem[]
): FundData[] => {
  return apiData.map((item) => {
    const fundItem = fundList.find((f) => f.code === item.FCODE);
    const num = fundItem?.num || 0;
    const cost = fundItem?.cost;

    const dwjz = isNaN(Number(item.NAV)) ? null : Number(item.NAV);
    let gsz = isNaN(Number(item.GSZ)) ? null : Number(item.GSZ);
    let gszzl = isNaN(Number(item.GSZZL)) ? 0 : Number(item.GSZZL);
    let hasReplace = false;

    // åˆ¤æ–­æ˜¯å¦å·²æ›´æ–°å®é™…å‡€å€¼
    if (item.PDATE !== '--' && item.PDATE === item.GZTIME?.substr(0, 10)) {
      gsz = dwjz;
      gszzl = isNaN(Number(item.NAVCHGRT)) ? 0 : Number(item.NAVCHGRT);
      hasReplace = true;
    }

    return {
      fundcode: item.FCODE,
      name: item.SHORTNAME,
      jzrq: item.PDATE,
      dwjz,
      gsz,
      gszzl,
      gztime: item.GZTIME,
      hasReplace,
      num,
      cost,
      amount: calculateAmount(dwjz, num),
      gains: calculateGains(dwjz, gsz, gszzl, num, hasReplace),
      costGains: calculateCostGains(dwjz, cost, num),
      costGainsRate: calculateCostGainsRate(dwjz, cost),
    };
  });
};

// è®¡ç®—æ€»æ”¶ç›Š
export const calculateTotalGains = (fundData: FundData[]): {
  gains: number;
  gainsRate: number;
  costGains: number;
  costGainsRate: number;
} => {
  let totalGains = 0;
  let totalCostGains = 0;
  let totalAmount = 0;

  fundData.forEach((fund) => {
    totalGains += fund.gains;
    totalCostGains += fund.costGains;
    totalAmount += fund.amount;
  });

  return {
    gains: Number(totalGains.toFixed(2)),
    gainsRate: totalAmount ? Number(((totalGains * 100) / totalAmount).toFixed(2)) : 0,
    costGains: Number(totalCostGains.toFixed(2)),
    costGainsRate: totalAmount
      ? Number(((totalCostGains * 100) / (totalAmount - totalCostGains)).toFixed(2))
      : 0,
  };
};
```

### 8.2 äº¤æ˜“æ—¶é—´åˆ¤æ–­ (src/utils/holiday.ts)

```typescript
interface HolidayData {
  version: string;
  lastDate: string;
  data: {
    [year: string]: {
      [date: string]: {
        holiday: boolean;
        name: string;
      };
    };
  };
}

let holidayData: HolidayData | null = null;

// åŠ è½½èŠ‚å‡æ—¥æ•°æ®
export const loadHolidayData = async (): Promise<HolidayData> => {
  if (holidayData) return holidayData;

  try {
    const response = await fetch('/holiday.json');
    holidayData = await response.json();
    return holidayData!;
  } catch (error) {
    console.error('Failed to load holiday data:', error);
    return { version: '0', lastDate: '', data: {} };
  }
};

// æ£€æŸ¥æ˜¯å¦æ˜¯èŠ‚å‡æ—¥
export const isHoliday = async (date: Date): Promise<boolean> => {
  const data = await loadHolidayData();

  const year = date.getFullYear().toString();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  const dateKey = `${month}-${day}`;

  const yearData = data.data[year];
  if (yearData && yearData[dateKey]) {
    return yearData[dateKey].holiday;
  }

  return false;
};

// åˆ¤æ–­æ˜¯å¦æ˜¯äº¤æ˜“æ—¶é—´
export const isDuringTradeTime = async (): Promise<boolean> => {
  // è½¬æ¢ä¸ºä¸œ8åŒºæ—¶é—´
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset() * 60 * 1000;
  const china = new Date(utc + 8 * 60 * 60 * 1000);

  // æ£€æŸ¥å‘¨æœ«
  const dayOfWeek = china.getDay();
  if (dayOfWeek === 0 || dayOfWeek === 6) {
    return false;
  }

  // æ£€æŸ¥èŠ‚å‡æ—¥
  if (await isHoliday(china)) {
    return false;
  }

  // æ£€æŸ¥äº¤æ˜“æ—¶é—´
  const hours = china.getHours();
  const minutes = china.getMinutes();
  const time = hours * 60 + minutes;

  // ä¸Šåˆï¼š9:30 - 11:35
  const amStart = 9 * 60 + 30;
  const amEnd = 11 * 60 + 35;

  // ä¸‹åˆï¼š13:00 - 15:05
  const pmStart = 13 * 60;
  const pmEnd = 15 * 60 + 5;

  return (time >= amStart && time <= amEnd) || (time >= pmStart && time <= pmEnd);
};
```

### 8.3 æ ¼å¼åŒ–å·¥å…· (src/utils/format.ts)

```typescript
// æ ¼å¼åŒ–æ•°å­—ï¼ˆæ·»åŠ åƒåˆ†ä½ï¼‰
export const formatNumber = (
  num: number,
  decimals: number = 2
): string => {
  return num.toLocaleString('zh-CN', {
    minimumFractionDigits: decimals,
    maximumFractionDigits: decimals,
  });
};

// æ ¼å¼åŒ–é‡‘é¢ï¼ˆè‡ªåŠ¨æ·»åŠ å•ä½ï¼‰
export const formatAmount = (num: number): string => {
  const absNum = Math.abs(num);

  if (absNum < 10000) {
    return formatNumber(num);
  } else if (absNum < 100000000) {
    return formatNumber(num / 10000, 2) + 'ä¸‡';
  } else {
    return formatNumber(num / 100000000, 2) + 'äº¿';
  }
};

// æ ¼å¼åŒ–ç™¾åˆ†æ¯”
export const formatPercent = (num: number, decimals: number = 2): string => {
  return num.toFixed(decimals) + '%';
};

// æ ¼å¼åŒ–æ—¶é—´
export const formatTime = (timeStr: string): string => {
  if (!timeStr) return '';

  // å¦‚æœæ˜¯å®Œæ•´æ—¶é—´ï¼Œåªå–æ—¶é—´éƒ¨åˆ†
  if (timeStr.includes(' ')) {
    return timeStr.split(' ')[1].substring(0, 5);
  }

  // å¦‚æœæ˜¯æ—¥æœŸï¼Œåªå–æœˆæ—¥
  if (timeStr.includes('-')) {
    return timeStr.substring(5);
  }

  return timeStr;
};

// è·å–æ¶¨è·Œé¢œè‰² class
export const getChangeColor = (value: number): string => {
  if (value > 0) return 'text-up';
  if (value < 0) return 'text-down';
  return 'text-muted-foreground';
};

// è·å–æ¶¨è·ŒèƒŒæ™¯é¢œè‰² class
export const getChangeBgColor = (value: number): string => {
  if (value > 0) return 'bg-up/10 text-up';
  if (value < 0) return 'bg-down/10 text-down';
  return 'bg-muted text-muted-foreground';
};
```

---## ä¹ã€æ ¸å¿ƒç»„ä»¶å®ç°ç¤ºä¾‹

### 9.1 åŸºé‡‘åˆ—è¡¨ç»„ä»¶ (src/components/fund/FundList.tsx)

```tsx
import React, { useEffect, useCallback } from 'react';
import { RefreshCw, Settings, Plus } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { useFundStore } from '@/stores/fundStore';
import { useSettingsStore } from '@/stores/settingsStore';
import { fetchFundData } from '@/services/fundApi';
import { transformFundData, calculateTotalGains } from '@/utils/calculate';
import { isDuringTradeTime } from '@/utils/holiday';
import { formatNumber, getChangeColor } from '@/utils/format';
import FundItem from './FundItem';

export default function FundList() {
  const { fundList, fundData, setFundData, setLoading, isLoading } = useFundStore();
  const { showGains, showCost, isLiveUpdate } = useSettingsStore();

  const [isDuringTrade, setIsDuringTrade] = React.useState(false);
  const [isEditing, setIsEditing] = React.useState(false);

  // è·å–åŸºé‡‘æ•°æ®
  const fetchData = useCallback(async () => {
    if (fundList.length === 0) return;

    setLoading(true);
    try {
      const codes = fundList.map(f => f.code);
      const apiData = await fetchFundData(codes);
      const data = transformFundData(apiData, fundList);
      setFundData(data);
    } catch (error) {
      console.error('Failed to fetch fund data:', error);
    } finally {
      setLoading(false);
    }
  }, [fundList, setFundData, setLoading]);

  // æ£€æŸ¥äº¤æ˜“æ—¶é—´å¹¶è®¾ç½®å®šæ—¶å™¨
  useEffect(() => {
    const checkAndFetch = async () => {
      const trading = await isDuringTradeTime();
      setIsDuringTrade(trading);
      fetchData();
    };

    checkAndFetch();

    // è®¾ç½®å®šæ—¶æ›´æ–°
    let interval: NodeJS.Timeout | null = null;
    if (isLiveUpdate) {
      interval = setInterval(checkAndFetch, 60 * 1000); // æ¯åˆ†é’Ÿæ›´æ–°
    }

    return () => {
      if (interval) clearInterval(interval);
    };
  }, [fetchData, isLiveUpdate]);

  // è®¡ç®—æ€»æ”¶ç›Š
  const totals = calculateTotalGains(fundData);

  return (
    <div className="space-y-4">
      {/* å·¥å…·æ  */}
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-2">
          <span className="text-sm text-muted-foreground">
            å…± {fundList.length} åªåŸºé‡‘
          </span>
          <span className={`text-xs px-2 py-0.5 rounded ${
            isDuringTrade ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'
          }`}>
            {isDuringTrade ? 'äº¤æ˜“ä¸­' : 'ä¼‘å¸‚'}
          </span>
        </div>

        <div className="flex items-center gap-2">
          <Button
            variant="ghost"
            size="icon"
            onClick={fetchData}
            disabled={isLoading}
          >
            <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />
          </Button>
          <Button
            variant={isEditing ? 'default' : 'outline'}
            size="sm"
            onClick={() => setIsEditing(!isEditing)}
          >
            {isEditing ? 'å®Œæˆ' : 'ç¼–è¾‘'}
          </Button>
        </div>
      </div>

      {/* åŸºé‡‘åˆ—è¡¨ */}
      <div className="border rounded-lg divide-y">
        {fundData.map((fund, index) => (
          <FundItem
            key={fund.fundcode}
            fund={fund}
            index={index}
            isEditing={isEditing}
          />
        ))}

        {fundData.length === 0 && (
          <div className="p-8 text-center text-muted-foreground">
            <p>æš‚æ— åŸºé‡‘ï¼Œç‚¹å‡»æ·»åŠ </p>
            <Button variant="outline" className="mt-4">
              <Plus className="h-4 w-4 mr-2" />
              æ·»åŠ åŸºé‡‘
            </Button>
          </div>
        )}
      </div>

      {/* æ”¶ç›Šæ±‡æ€» */}
      {(showGains || showCost) && fundData.length > 0 && (
        <div className="flex gap-4 p-4 bg-muted/30 rounded-lg">
          {showGains && (
            <div>
              <span className="text-sm text-muted-foreground">æ—¥æ”¶ç›Šï¼š</span>
              <span className={`font-semibold ${getChangeColor(totals.gains)}`}>
                {formatNumber(totals.gains)}
                <span className="text-xs ml-1">({totals.gainsRate}%)</span>
              </span>
            </div>
          )}
          {showCost && (
            <div>
              <span className="text-sm text-muted-foreground">æŒæœ‰æ”¶ç›Šï¼š</span>
              <span className={`font-semibold ${getChangeColor(totals.costGains)}`}>
                {formatNumber(totals.costGains)}
                <span className="text-xs ml-1">({totals.costGainsRate}%)</span>
              </span>
            </div>
          )}
        </div>
      )}
    </div>
  );
}
```

### 9.2 æŒ‡æ•°æ ç»„ä»¶ (src/components/index/IndexBar.tsx)

```tsx
import React, { useEffect, useState } from 'react';
import { useFundStore } from '@/stores/fundStore';
import { fetchIndexData } from '@/services/indexApi';
import { formatNumber, getChangeColor } from '@/utils/format';
import type { IndexData } from '@/types/index';

export default function IndexBar() {
  const { indexList } = useFundStore();
  const [indexData, setIndexData] = useState<IndexData[]>([]);

  useEffect(() => {
    const fetchData = async () => {
      if (indexList.length === 0) return;
      const data = await fetchIndexData(indexList);
      setIndexData(data);
    };

    fetchData();
    const interval = setInterval(fetchData, 10 * 1000); // æ¯10ç§’æ›´æ–°

    return () => clearInterval(interval);
  }, [indexList]);

  return (
    <div className="grid grid-cols-4 gap-4 p-4 bg-card rounded-lg border">
      {indexData.map((index) => (
        <div
          key={`${index.f13}.${index.f12}`}
          className="text-center cursor-pointer hover:bg-muted/50 p-2 rounded transition-colors"
        >
          <div className="text-sm font-medium truncate">{index.f14}</div>
          <div className={`text-lg font-bold ${getChangeColor(index.f3)}`}>
            {formatNumber(index.f2, index.f2 > 1000 ? 2 : 4)}
          </div>
          <div className={`text-sm ${getChangeColor(index.f3)}`}>
            {index.f4 > 0 ? '+' : ''}{formatNumber(index.f4, 2)}
            <span className="ml-2">
              {index.f3 > 0 ? '+' : ''}{formatNumber(index.f3, 2)}%
            </span>
          </div>
        </div>
      ))}
    </div>
  );
}
```

### 9.3 ä¼°å€¼èµ°åŠ¿å›¾ç»„ä»¶ (src/components/chart/EstimateChart.tsx)

```tsx
import React, { useEffect, useRef } from 'react';
import * as echarts from 'echarts';
import { fetchFundEstimateTrend } from '@/services/fundApi';
import { useSettingsStore } from '@/stores/settingsStore';

interface Props {
  fundCode: string;
  baseValue: number;
}

export default function EstimateChart({ fundCode, baseValue }: Props) {
  const chartRef = useRef<HTMLDivElement>(null);
  const { darkMode } = useSettingsStore();

  useEffect(() => {
    if (!chartRef.current) return;

    const chart = echarts.init(chartRef.current, darkMode ? 'dark' : undefined);

    const loadData = async () => {
      const { time, values } = await fetchFundEstimateTrend(fundCode);

      // è®¡ç®—æ¶¨è·Œå¹…
      const changes = values.map(v => ((v - baseValue) / baseValue * 100).toFixed(2));

      const option: echarts.EChartsOption = {
        backgroundColor: 'transparent',
        tooltip: {
          trigger: 'axis',
          formatter: (params: any) => {
            const data = params[0];
            const change = changes[data.dataIndex];
            const color = Number(change) >= 0 ? '#ef4444' : '#22c55e';
            return `
              <div>
                <div>${data.axisValue}</div>
                <div>ä¼°å€¼ï¼š${data.value}</div>
                <div style="color:${color}">æ¶¨è·Œï¼š${change}%</div>
              </div>
            `;
          },
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          top: '10%',
          containLabel: true,
        },
        xAxis: {
          type: 'category',
          data: time,
          boundaryGap: false,
          axisLabel: {
            interval: 30,
          },
        },
        yAxis: {
          type: 'value',
          scale: true,
          splitLine: {
            lineStyle: {
              type: 'dashed',
            },
          },
        },
        series: [
          {
            name: 'ä¼°å€¼',
            type: 'line',
            data: values,
            smooth: true,
            symbol: 'none',
            lineStyle: {
              width: 2,
            },
            areaStyle: {
              opacity: 0.1,
            },
            itemStyle: {
              color: values[values.length - 1] >= baseValue ? '#ef4444' : '#22c55e',
            },
          },
        ],
      };

      chart.setOption(option);
    };

    loadData();

    const handleResize = () => chart.resize();
    window.addEventListener('resize', handleResize);

    return () => {
      window.removeEventListener('resize', handleResize);
      chart.dispose();
    };
  }, [fundCode, baseValue, darkMode]);

  return <div ref={chartRef} className="w-full h-64" />;
}
```

---

## åã€é¡µé¢ç»“æ„

### 10.1 é¦–é¡µ (src/pages/index.astro)

```astro
---
import Layout from '../layouts/Layout.astro';
import App from '../components/App';
---

<Layout title="è‡ªé€‰åŸºé‡‘åŠ©æ‰‹">
  <App client:load />
</Layout>
```

### 10.2 ä¸»åº”ç”¨ç»„ä»¶ (src/components/App.tsx)

```tsx
import React from 'react';
import { Toaster } from '@/components/ui/toaster';
import IndexBar from './index/IndexBar';
import FundList from './fund/FundList';
import FundSearch from './fund/FundSearch';
import ThemeToggle from './layout/ThemeToggle';

export default function App() {
  return (
    <div className="min-h-screen bg-background">
      {/* å“åº”å¼å¤´éƒ¨ */}
      <header className="sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
        <div className="container mx-auto px-4 py-3 flex items-center justify-between">
          <h1 className="text-lg sm:text-xl font-bold">åŸºé‡‘æ´¾</h1>
          <ThemeToggle />
        </div>
      </header>

      {/* å“åº”å¼ä¸»ä½“ - ç§»åŠ¨ç«¯ä¼˜åŒ–é—´è· */}
      <main className="container mx-auto px-3 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6 max-w-7xl">
        <IndexBar />
        <FundSearch />
        <FundList />
      </main>

      <Toaster />
    </div>
  );
}
```

---

## åä¸€ã€è¿ç§»æ­¥éª¤

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ­å»ºï¼ˆ1-2å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆReactã€Tailwindã€shadcn/uiã€EChartsç­‰ï¼‰
2. [ ] é…ç½® Astro + React + Tailwind
3. [ ] é…ç½® Vite ä»£ç†è§£å†³è·¨åŸŸ
4. [ ] é…ç½® shadcn/ui
5. [ ] åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„
6. [ ] å®ç°ç±»å‹å®šä¹‰ï¼ˆfund.ts, index.ts, settings.tsï¼‰
7. [ ] å®ç° Zustand storesï¼ˆfundStore, settingsStoreï¼‰
8. [ ] é…ç½® Vercel éƒ¨ç½²æ–‡ä»¶

### ç¬¬äºŒé˜¶æ®µï¼šAPI å±‚ï¼ˆ1å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] å®ç° Axios é…ç½®ï¼ˆapi.tsï¼‰
2. [ ] å®ç°åŸºé‡‘ APIï¼ˆfundApi.tsï¼‰
3. [ ] å®ç°æŒ‡æ•° APIï¼ˆindexApi.tsï¼‰
4. [ ] å®ç°è¡Œæƒ… APIï¼ˆmarketApi.tsï¼‰
5. [ ] å®ç°æœç´¢ APIï¼ˆsearchApi.tsï¼‰
6. [ ] æµ‹è¯• API è°ƒç”¨ï¼ˆå¼€å‘ç¯å¢ƒä»£ç†ï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šå·¥å…·å‡½æ•°ï¼ˆ0.5å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] å®ç°æ”¶ç›Šè®¡ç®—å‡½æ•°ï¼ˆcalculate.tsï¼‰
2. [ ] å®ç°äº¤æ˜“æ—¶é—´åˆ¤æ–­ï¼ˆholiday.tsï¼‰
3. [ ] å®ç°æ ¼å¼åŒ–å·¥å…·ï¼ˆformat.tsï¼‰

### ç¬¬å››é˜¶æ®µï¼šæ ¸å¿ƒç»„ä»¶ï¼ˆ3-4å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ï¼ˆThemeToggleï¼‰
2. [ ] æŒ‡æ•°æ ç»„ä»¶ï¼ˆIndexBarï¼‰
3. [ ] åŸºé‡‘åˆ—è¡¨ç»„ä»¶ï¼ˆFundList, FundItemï¼‰
4. [ ] åŸºé‡‘æœç´¢ç»„ä»¶ï¼ˆFundSearchï¼‰
5. [ ] åŸºé‡‘è¯¦æƒ…å¼¹çª—ï¼ˆFundDetailï¼‰
6. [ ] æ”¶ç›Šæ±‡æ€»å±•ç¤º
7. [ ] å“åº”å¼å¸ƒå±€é€‚é…

### ç¬¬äº”é˜¶æ®µï¼šå›¾è¡¨ç»„ä»¶ï¼ˆ2å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] ä¼°å€¼èµ°åŠ¿å›¾ï¼ˆEstimateChartï¼‰
2. [ ] å†å²å‡€å€¼å›¾ï¼ˆHistoryChartï¼‰
3. [ ] ç´¯è®¡æ”¶ç›Šå›¾ï¼ˆProfitChartï¼‰
4. [ ] é…ç½® ECharts æ˜æš—ä¸»é¢˜

### ç¬¬å…­é˜¶æ®µï¼šè¡Œæƒ…ä¸­å¿ƒï¼ˆ1-2å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] è¡Œæƒ…ä¸­å¿ƒå…¥å£
2. [ ] å¤§ç›˜èµ„é‡‘æµå‘ï¼ˆMarketFlowï¼‰
3. [ ] è¡Œä¸šæ¿å—ï¼ˆIndustryFlowï¼‰
4. [ ] åŒ—å‘/å—å‘èµ„é‡‘ï¼ˆNorthFlow, SouthFlowï¼‰

### ç¬¬ä¸ƒé˜¶æ®µï¼šè®¾ç½®åŠŸèƒ½ï¼ˆ1å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] æ˜¾ç¤ºè®¾ç½®ï¼ˆæ˜¾ç¤º/éšè—å„é¡¹æ•°æ®ï¼‰
2. [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆæ˜/æš—ä¸»é¢˜ï¼‰
3. [ ] æ’åºè®¾ç½®

### ç¬¬å…«é˜¶æ®µï¼šä¼˜åŒ–å®Œå–„ï¼ˆ1-2å¤©ï¼‰âœ… é«˜ä¼˜å…ˆçº§

1. [ ] ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–
2. [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‡’åŠ è½½ã€ç¼“å­˜ï¼‰
3. [ ] é”™è¯¯å¤„ç†å’Œé™çº§
4. [ ] åŠ è½½çŠ¶æ€ä¼˜åŒ–
5. [ ] éƒ¨ç½²åˆ° Vercel æµ‹è¯•

### ç¬¬ä¹é˜¶æ®µï¼šä½ä¼˜å…ˆçº§åŠŸèƒ½ï¼ˆå»¶åï¼‰ğŸ”œ

1. [ ] æ•°æ®å¯¼å…¥å¯¼å‡ºï¼ˆExcelï¼‰
2. [ ] æ‹–æ‹½æ’åºåŠŸèƒ½
3. [ ] æ›´å¤šå›¾è¡¨ç±»å‹
4. [ ] æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

---

## åäºŒã€æ³¨æ„äº‹é¡¹

### 12.1 è·¨åŸŸé—®é¢˜

**é‡‡ç”¨æ–¹æ¡ˆ C**ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨ Vite ä»£ç†ï¼Œç”Ÿäº§ç¯å¢ƒåç»­æ ¹æ®å®é™…æƒ…å†µå†³å®šï¼ˆå¯èƒ½ç›´æ¥è°ƒç”¨æˆ–ä½¿ç”¨ä»£ç†ï¼‰ã€‚

#### å¼€å‘ç¯å¢ƒé…ç½®

```javascript
// astro.config.mjs
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';

export default defineConfig({
  integrations: [
    react(),
    tailwind({
      applyBaseStyles: false,
    }),
  ],
  output: 'static',
  vite: {
    server: {
      proxy: {
        '/api/fund': {
          target: 'https://fundmobapi.eastmoney.com',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api\/fund/, ''),
          secure: false,
        },
        '/api/index': {
          target: 'https://push2.eastmoney.com',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api\/index/, ''),
          secure: false,
        },
        '/api/search': {
          target: 'https://fundsuggest.eastmoney.com',
          changeOrigin: true,
          rewrite: (path) => path.replace(/^\/api\/search/, ''),
          secure: false,
        },
      },
    },
  },
});
```

#### API è°ƒç”¨é…ç½®

```typescript
// src/services/api.ts
const API_BASE_URL = import.meta.env.DEV ? '' : 'https://fundmobapi.eastmoney.com';
const INDEX_BASE_URL = import.meta.env.DEV ? '' : 'https://push2.eastmoney.com';
const SEARCH_BASE_URL = import.meta.env.DEV ? '' : 'https://fundsuggest.eastmoney.com';

// å¼€å‘ç¯å¢ƒä½¿ç”¨ä»£ç†è·¯å¾„ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®é™… API åœ°å€
export const getApiUrl = (type: 'fund' | 'index' | 'search') => {
  if (import.meta.env.DEV) {
    return `/api/${type}`;
  }
  switch (type) {
    case 'fund': return API_BASE_URL;
    case 'index': return INDEX_BASE_URL;
    case 'search': return SEARCH_BASE_URL;
  }
};
```

### 12.2 Vercel éƒ¨ç½²é…ç½®

**åˆ›å»º vercel.json é…ç½®æ–‡ä»¶**ï¼š

```json
{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "buildCommand": "pnpm run build",
  "outputDirectory": "dist",
  "framework": "astro",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    },
    {
      "source": "/_astro/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

**ç¯å¢ƒå˜é‡é…ç½®**ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­é…ç½®ï¼š
- `NODE_VERSION`: 20
- `PNPM_VERSION`: 9

**éƒ¨ç½²æ­¥éª¤**ï¼š

1. å°†é¡¹ç›®æ¨é€åˆ° GitHub
2. åœ¨ Vercel ä¸­å¯¼å…¥é¡¹ç›®
3. é€‰æ‹© Astro æ¡†æ¶
4. ä¿æŒé»˜è®¤é…ç½®æˆ–ä½¿ç”¨ vercel.json
5. éƒ¨ç½²

### 12.3 æµè§ˆå™¨æ‰©å±•ç‰¹æœ‰åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½æ— æ³•ç›´æ¥è¿ç§»åˆ° Webï¼š

| åŠŸèƒ½ | æ›¿ä»£æ–¹æ¡ˆ |
|------|---------|
| è§’æ ‡æé†’ | ä½¿ç”¨æµè§ˆå™¨é€šçŸ¥ API / æ ‡é¢˜é—ªçƒ |
| chrome.storage.sync | localStorage + æ‰‹åŠ¨å¯¼å…¥å¯¼å‡º |
| åå°å®šæ—¶ä»»åŠ¡ | ä½¿ç”¨ setIntervalï¼ˆé¡µé¢æ‰“å¼€æ—¶ï¼‰ |
| å³é”®èœå• | ä¸é€‚ç”¨ |

### 12.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. ä½¿ç”¨ `useMemo` å’Œ `useCallback` ä¼˜åŒ–æ¸²æŸ“
2. åŸºé‡‘æ•°æ®åˆ†é¡µåŠ è½½ï¼ˆå¦‚è¶…è¿‡50åªï¼‰
3. å›¾è¡¨ç»„ä»¶æ‡’åŠ è½½
4. ä½¿ç”¨ Web Worker å¤„ç†å¤æ‚è®¡ç®—

### 12.4 ç§»åŠ¨ç«¯é€‚é…è¦ç‚¹

#### å“åº”å¼è®¾è®¡åŸåˆ™

1. **ç§»åŠ¨ä¼˜å…ˆç­–ç•¥**ï¼šä»å°å±å¹•å¼€å§‹è®¾è®¡ï¼Œé€æ­¥é€‚é…å¤§å±
2. **è§¦æ‘¸å‹å¥½**ï¼šæŒ‰é’®æœ€å°ç‚¹å‡»åŒºåŸŸ 44x44px
3. **å¯è¯»æ€§**ï¼šç§»åŠ¨ç«¯æœ€å°å­—å· 14pxï¼Œé‡è¦ä¿¡æ¯ 16px
4. **ç®€åŒ–æ“ä½œ**ï¼šå‡å°‘è¾“å…¥ï¼Œæä¾›å¿«æ·æ“ä½œ

#### Tailwind å“åº”å¼æ–­ç‚¹

```typescript
// ä½¿ç”¨ Tailwind å“åº”å¼ç±»
<div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
  {/* ç§»åŠ¨ç«¯ 1 åˆ—ï¼Œå¹³æ¿ 2 åˆ—ï¼Œæ¡Œé¢ 4 åˆ— */}
</div>

<div className="text-sm sm:text-base lg:text-lg">
  {/* æ ¹æ®å±å¹•å¤§å°è°ƒæ•´å­—å· */}
</div>

<div className="px-3 sm:px-4 lg:px-6">
  {/* ç§»åŠ¨ç«¯å°é—´è·ï¼Œå¤§å±å¤§é—´è· */}
</div>
```

#### ç§»åŠ¨ç«¯ç»„ä»¶é€‚é…ç¤ºä¾‹

```tsx
// å“åº”å¼æŒ‡æ•°æ 
<div className="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4">
  {/* ç§»åŠ¨ç«¯ 2 åˆ—ï¼Œæ¡Œé¢ 4 åˆ— */}
</div>

// å“åº”å¼è¡¨æ ¼
<div className="overflow-x-auto">
  <table className="min-w-full">
    {/* ç§»åŠ¨ç«¯æ¨ªå‘æ»šåŠ¨ */}
  </table>
</div>

// å“åº”å¼å¼¹çª—
<Dialog>
  <DialogContent className="w-[95vw] sm:max-w-[600px] max-h-[90vh]">
    {/* ç§»åŠ¨ç«¯å‡ ä¹å…¨å±ï¼Œæ¡Œé¢å›ºå®šå®½åº¦ */}
  </DialogContent>
</Dialog>
```

#### ç§»åŠ¨ç«¯äº¤äº’ä¼˜åŒ–

- **ä¸‹æ‹‰åˆ·æ–°**ï¼šä½¿ç”¨ `pull-to-refresh` åº“
- **é•¿åˆ—è¡¨ä¼˜åŒ–**ï¼šä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆreact-windowï¼‰
- **æ‰‹åŠ¿æ“ä½œ**ï¼šä¾§æ»‘åˆ é™¤ã€å·¦å³åˆ‡æ¢
- **åº•éƒ¨å¯¼èˆª**ï¼šç§»åŠ¨ç«¯ä½¿ç”¨åº•éƒ¨ Tab å¯¼èˆª

### 12.5 ä¸»é¢˜åˆ‡æ¢å®ç°

#### ä¸»é¢˜é…ç½® (src/lib/theme.ts)

```typescript
export const themes = {
  light: {
    background: 'hsl(0 0% 100%)',
    foreground: 'hsl(222.2 84% 4.9%)',
    primary: 'hsl(221.2 83.2% 53.3%)',
    // ...
  },
  dark: {
    background: 'hsl(222.2 84% 4.9%)',
    foreground: 'hsl(210 40% 98%)',
    primary: 'hsl(217.2 91.2% 59.8%)',
    // ...
  },
};

// ä¸»é¢˜åˆ‡æ¢ hook
export const useTheme = () => {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');
    root.classList.add(theme);
  }, [theme]);

  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };

  return { theme, toggleTheme };
};
```

#### ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ (src/components/layout/ThemeToggle.tsx)

```tsx
import React from 'react';
import { Moon, Sun } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { useSettingsStore } from '@/stores/settingsStore';

export default function ThemeToggle() {
  const { darkMode, setDarkMode } = useSettingsStore();

  React.useEffect(() => {
    const root = document.documentElement;
    if (darkMode) {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }
  }, [darkMode]);

  return (
    <Button
      variant="ghost"
      size="icon"
      onClick={() => setDarkMode(!darkMode)}
      aria-label="åˆ‡æ¢ä¸»é¢˜"
    >
      {darkMode ? (
        <Sun className="h-5 w-5" />
      ) : (
        <Moon className="h-5 w-5" />
      )}
    </Button>
  );
}
```

#### CSS å˜é‡é…ç½® (src/styles/globals.css)

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    /* è‡ªå®šä¹‰æ¶¨è·Œé¢œè‰² */
    --up: 0 84.2% 60.2%;
    --down: 142.1 76.2% 36.3%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    /* æš—è‰²ä¸»é¢˜æ¶¨è·Œé¢œè‰² */
    --up: 0 72.2% 50.6%;
    --down: 142.1 70.6% 45.3%;
  }
}

/* ä¸»é¢˜åˆ‡æ¢åŠ¨ç”» */
* {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}
```

---

## åä¸‰ã€é¡¹ç›®å†³ç­–æ€»ç»“

### å·²ç¡®è®¤å†³ç­–

| å†³ç­–é¡¹ | ç»“æœ |
|--------|------|
| **é¡¹ç›®åç§°** | åŸºé‡‘æ´¾ |
| **éƒ¨ç½²å¹³å°** | Vercel |
| **è·¨åŸŸæ–¹æ¡ˆ** | æ–¹æ¡ˆ Cï¼šå¼€å‘ç¯å¢ƒç”¨ Vite ä»£ç†ï¼Œç”Ÿäº§ç¯å¢ƒåç»­å†³å®š |
| **PWA æ”¯æŒ** | ä¸éœ€è¦ |
| **æ•°æ®è¿ç§»** | ä¸éœ€è¦ï¼ˆæ–°é¡¹ç›®ï¼Œæ— è€ç”¨æˆ·ï¼‰ |
| **MVP ä¼˜å…ˆçº§** | å¯¼å…¥å¯¼å‡ºä½ä¼˜å…ˆçº§ï¼Œå…¶ä»–åŠŸèƒ½é«˜ä¼˜å…ˆçº§ |

### æŠ€æœ¯æ ˆå¯¹æ¯”

| åŸé¡¹ç›®ï¼ˆfunds-masterï¼‰ | æ–°é¡¹ç›®ï¼ˆåŸºé‡‘æ´¾ï¼‰ |
|----------------------|----------------|
| Vue 2 | React 19 |
| Element UI | shadcn/ui |
| Webpack | Astro/Vite |
| SCSS | Tailwind CSS |
| chrome.storage | Zustand + localStorage |
| æµè§ˆå™¨æ‰©å±• | å“åº”å¼ Web åº”ç”¨ |
| å•ä¸€ä¸»é¢˜ | æ˜æš—ä¸»é¢˜åˆ‡æ¢ |
| æ¡Œé¢ç«¯ | ç§»åŠ¨ç«¯ + æ¡Œé¢ç«¯ |

### æ ¸å¿ƒç‰¹æ€§

**ç¬¬ä¸€é˜¶æ®µäº¤ä»˜**ï¼š
- âœ… å®Œæ•´çš„åŸºé‡‘ç®¡ç†åŠŸèƒ½ï¼ˆæ·»åŠ /åˆ é™¤/æ’åºï¼‰
- âœ… å®æ—¶æ•°æ®å±•ç¤ºï¼ˆä¼°å€¼/æ¶¨è·Œå¹…ï¼‰
- âœ… æ”¶ç›Šè®¡ç®—ï¼ˆæ—¥æ”¶ç›Š/æŒæœ‰æ”¶ç›Šï¼‰
- âœ… æŒ‡æ•°æ å®æ—¶å±•ç¤º
- âœ… å›¾è¡¨åŠŸèƒ½ï¼ˆä¼°å€¼èµ°åŠ¿/å†å²å‡€å€¼ï¼‰
- âœ… è¡Œæƒ…ä¸­å¿ƒï¼ˆå¤§ç›˜/è¡Œä¸š/èµ„é‡‘æµå‘ï¼‰
- âœ… ç§»åŠ¨ç«¯ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
- âœ… æ˜æš—ä¸»é¢˜æ— ç¼åˆ‡æ¢
- âœ… æœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œä¿æŠ¤ç”¨æˆ·éšç§

**ç¬¬äºŒé˜¶æ®µäº¤ä»˜**ï¼š
- ğŸ”œ æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- ğŸ”œ æ‹–æ‹½æ’åºä¼˜åŒ–
- ğŸ”œ æ›´å¤šå›¾è¡¨ç±»å‹

### æ—¶é—´ä¼°ç®—

- **ç¬¬ä¸€é˜¶æ®µï¼ˆMVPï¼‰**ï¼š10-12 ä¸ªå·¥ä½œæ—¥
- **ç¬¬äºŒé˜¶æ®µï¼ˆä½ä¼˜å…ˆçº§ï¼‰**ï¼š3-5 ä¸ªå·¥ä½œæ—¥
- **æ€»è®¡**ï¼š13-17 ä¸ªå·¥ä½œæ—¥

---

## åå››ã€å¼€å‘å‡†å¤‡æ¸…å•

å¼€å§‹å¼€å‘å‰è¯·ç¡®è®¤ï¼š

- [ ] Node.js 20+ å·²å®‰è£…
- [ ] pnpm å·²å®‰è£…
- [ ] Git ä»“åº“å·²åˆ›å»º
- [ ] GitHub ä»“åº“å·²å…³è”ï¼ˆç”¨äº Vercel éƒ¨ç½²ï¼‰
- [ ] ç¡®è®¤ä¸œæ–¹è´¢å¯Œ API å¯è®¿é—®
- [ ] å‡†å¤‡å¥½ holiday.json æ–‡ä»¶
- [ ] VS Code å®‰è£…ç›¸å…³æ’ä»¶ï¼ˆAstro, Tailwind CSS IntelliSenseï¼‰

**å‡†å¤‡å°±ç»ªåï¼Œå¯ä»¥å¼€å§‹ç¬¬ä¸€é˜¶æ®µçš„å¼€å‘å·¥ä½œï¼**
